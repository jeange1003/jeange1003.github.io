<html>

<head>
  <title>SVG - Clipping and masking</title>
  <meta name="viewport"
    content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0" />
  <link rel="stylesheet" href="common.css" />
  <script src="utils.js"></script>
</head>

<body>
  <h1>SVG - Clipping and masking</h1>
  <p>
    只有在裁剪图形内的部分才会显示出来。裁剪图形用clipPath元素。被裁剪图形用clip-path属性。
  </p>
  <p>用一个长方形裁剪一个圆形：</p>
  <pre id="code1"></pre>
  <svg id="demo1" width="300" height="150">
    <defs>
      <clipPath id="cut-off-bottom">
        <rect x="50" y="0" width="200" height="100" />
      </clipPath>
    </defs>
    <circle cx="100" cy="100" r="100" clip-path="url(#cut-off-bottom)" />
  </svg>
  <script>outputHtml({ domId: 'demo1', loggerId: 'code1' })</script>
  <p>
    被clipping裁剪的部分不会显示，其他部分显示。不同于clipping的「显示」-「不显示」状态。mask会根据其亮度(luminance)设置被覆盖元素的透明度，mask越暗，被覆盖元素越透明。
  </p>
  <pre id="code2"></pre>
  <svg id="demo2" width="400" height="150">
    <defs>
      <linearGradient id="Gradient">
        <stop offset="0" stop-color="black" />
        <stop offset="1" stop-color="white" />
      </linearGradient>
      <mask id="mask1">
        <rect x="50" y="0" width="50" height="50" fill="gray" />
      </mask>
      <mask id="mask2">
        <rect x="150" y="0" width="50" height="50" fill="#ff0000" />
      </mask>
      <mask id="mask3">
        <rect x="250" y="0" width="50" height="50" fill="#00ff00" />
      </mask>
      <mask id="mask4">
        <rect x="350" y="0" width="50" height="50" fill="#0000ff" />
      </mask>
    </defs>

    <!-- <rect x="0" y="0" width="200" height="200" fill="green" /> -->
    <rect x="0" y="0" width="400" height="100" fill="#eeeeee" />
    <rect x="0" y="0" width="100" height="100" fill="red" mask="url(#mask1)" />
    <rect x="100" y="0" width="100" height="100" fill="red" mask="url(#mask2)" />
    <rect x="200" y="0" width="100" height="100" fill="red" mask="url(#mask3)" />
    <rect x="300" y="0" width="100" height="100" fill="red" mask="url(#mask4)" />
  </svg>
  <script>outputHtml({ domId: 'demo2', loggerId: 'code2' })</script>
  <p>
    RGB与亮度的计算公式有多种，不知道浏览器用的哪种。公式
    <a href="https://stackoverflow.com/questions/596216/formula-to-determine-perceived-brightness-of-rgb-color">
      参考
    </a>
  </p>
  <ul>
    <li>(0.2126*R + 0.7152*G + 0.0722*B)</li>
    <li>(0.299*R + 0.587*G + 0.114*B)</li>
    <li>sqrt( 0.299*R^2 + 0.587*G^2 + 0.114*B^2 )</li>
  </ul>
  <p></p>
  <div class="paging">
    <a href="page9.html">上一页</a><a href="page11.html">下一页</a>
  </div>
</body>

</html>